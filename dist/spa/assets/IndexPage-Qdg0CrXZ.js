import{Q as E}from"./QPage-CRXg9CLo.js";import{_ as k,q as d,J as $,u as r,t as s,j as f,s as i,Q as p,x as m,F as Q,N as b,E as g,O as P,r as C,f as D,L as N,K as O,I as S,M as T,p as j}from"./index-DHSe1Man.js";import{b as K,a as _,Q as x}from"./TouchPan-MdoHDnAh.js";import{Q as L}from"./QMenu-DdFdiw-l.js";import{C as v}from"./ClosePopup-CUQAiiAZ.js";import{s as M}from"./superComposable-tYNyz0Wa.js";import{C as V}from"./ContentFiles-6lve4miX.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./QResizeObserver-BKTGu071.js";const U={class:"text-center tw-flex tw-flex-col tw-justify-center tw-items-center"},q=["id","disabled","value"],J={__name:"FolderContent",props:{size:{type:String,default:"80"},color:{type:String,default:"#F0B82B"},name:{type:String,default:""},edite:{type:Boolean,default:!1},id:{type:Number}},emits:["openFolder","editeFolder","addFile","deleteFolder","blurInput"],setup(w,{emit:o}){const n=o,e=w,F=()=>document.getElementById("content-folder").focus();return(y,t)=>(d(),$("div",U,[r(Q,{"fab-mini":"",round:"",color:"primary",size:"5px",icon:"more_vert",class:"tw-z-[100] tw-mb-[-40px] tw-mr-[-60px]"},{default:s(()=>[r(L,null,{default:s(()=>[r(K,{dense:"",style:{"min-width":"100px"}},{default:s(()=>[f((d(),i(_,{clickable:"",onClick:t[0]||(t[0]=a=>n("openFolder",e.id))},{default:s(()=>[r(p,{color:"secondary",name:"folder_open",class:"tw-mt-[4px] tw-mr-[4px]",size:"20px"}),r(x,null,{default:s(()=>[m("Open folder")]),_:1})]),_:1})),[[v]]),f((d(),i(_,{clickable:"",onClick:t[1]||(t[1]=a=>n("editeFolder",e.id))},{default:s(()=>[r(p,{color:"secondary",name:"edit",class:"tw-mt-[4px] tw-mr-[4px]",size:"20px"}),r(x,null,{default:s(()=>[m("Edite name")]),_:1})]),_:1})),[[v]]),f((d(),i(_,{clickable:""},{default:s(()=>[r(p,{color:"secondary",name:"palette",class:"tw-mt-[4px] tw-mr-[4px]",size:"20px"}),r(x,null,{default:s(()=>[m("Change color")]),_:1})]),_:1})),[[v]]),f((d(),i(_,{clickable:"",onClick:t[2]||(t[2]=a=>n("addFile"))},{default:s(()=>[r(p,{color:"secondary",name:"note_add",class:"tw-mt-[4px] tw-mr-[4px]",size:"20px"}),r(x,null,{default:s(()=>[m("add file")]),_:1})]),_:1})),[[v]]),f((d(),i(_,{clickable:"",onClick:t[3]||(t[3]=a=>n("deleteFolder",e.id))},{default:s(()=>[r(p,{color:"secondary",name:"delete",class:"tw-mt-[4px] tw-mr-[4px]",size:"20px"}),r(x,null,{default:s(()=>[m("Delete folder")]),_:1})]),_:1})),[[v]])]),_:1})]),_:1})]),_:1}),r(p,{name:"folder",size:`${e.size}px`,style:b(`color:${e.color}`),class:"tw-cursor-pointer tw-w-full",onDblclick:t[4]||(t[4]=a=>n("openFolder",e.id))},null,8,["size","style"]),g("input",{id:`folder-${e.id}`,disabled:!e.edite,value:e.name,style:b(e.edite?"":"cursor:pointer !important; background-color:transparent"),class:"tw-cursor-pointer text-center",onBlur:t[5]||(t[5]=a=>n("blurInput",a)),onKeyup:t[6]||(t[6]=P(a=>F(),["enter"])),onDblclick:t[7]||(t[7]=a=>n("openFolder",e.id))},null,44,q)]))}},A=k(J,[["__file","FolderContent.vue"]]),G={class:"text-center"},H={__name:"FileExplorer",setup(w){const{store:o,router:n}=M(),e=C(0),F=C(!1),y={edite:!0,type:"folder",color:"#F0B82B",size:"80",name:"",user_id:"",folder_id:""},t=()=>{o.folders.data?e.value=o.folders.data.length+100:e.value=100,o.folders.addPlaceFolder({...y,id:e.value}),setTimeout(()=>{document.getElementById(`folder-${e.value}`)?.focus()},60)},a=l=>{setTimeout(()=>{if(l.target.value==""&&l.target._value!="")l.target.value=l.target._value;else if(l.target._value==""&&l.target.value=="")o.folders.removePlaceFolder(e.value);else if(F.value){const u=o.folders.data.find(c=>c.id==e.value);o.folders.updateFolder(u.id,u.user_id,{name:l.target.value})}else l.target._value=l.target.value,o.folders.createFolder({...y,edite:!1,name:l.target._value,user_id:o.auth.current.id})},80)},B=l=>{o.folders.deleteFolder(l)},I=l=>{o.folders.changeEditePlaceFolder(l),F.value=!0,e.value=l,setTimeout(()=>document.getElementById(`folder-${l}`).focus(),100)},z=l=>{o.files.reset(),n.push({name:"folders",params:{id:l}})};return D(()=>{o.folders.getFoldersOfUser(o.auth.current.id)}),(l,u)=>(d(),i(V,null,{default:s(()=>[g("div",G,[r(p,{name:"create_new_folder",size:"80px",color:"primary",class:"tw-opacity-50 tw-cursor-pointer",onClick:u[0]||(u[0]=c=>t())}),g("p",{class:"text-accent tw-cursor-pointer",onClick:u[1]||(u[1]=c=>t())}," New folder ")]),(d(!0),$(N,null,O(S(o).folders.data,c=>(d(),i(A,T({key:c.id,ref_for:!0},c,{onBlurInput:a,onDeleteFolder:B,onEditeFolder:I,onOpenFolder:z}),null,16))),128))]),_:1}))}},R=k(H,[["__file","FileExplorer.vue"]]),W=j({name:"IndexPage",__name:"IndexPage",setup(w){return(o,n)=>(d(),i(E,{class:"row items-center justify-evenly"},{default:s(()=>[r(R)]),_:1}))}}),se=k(W,[["__file","IndexPage.vue"]]);export{se as default};
