import{Q as E}from"./QPage-DzauHIHK.js";import{_ as g,D as d,V as C,G as o,F as s,z as p,E as i,Q as u,I as c,R as P,$ as b,P as y,a0 as Q,r as k,x as D,X as N,W as S,U as T,Z as V,C as O}from"./index-8A18UAFp.js";import{b as U,a as f,Q as m}from"./QList-122oryhG.js";import{Q as j}from"./QMenu-BPBtoygw.js";import{C as _}from"./ClosePopup-BBhaD4b9.js";import{s as K}from"./superComposable-eMaWt6Xc.js";import{C as L}from"./ContentFiles-D55dyprn.js";import"./_commonjsHelpers-Cpj98o6Y.js";const M={class:"text-center tw-flex tw-flex-col tw-justify-center tw-items-center"},G=["id","disabled","value"],R={__name:"FolderContent",props:{size:{type:String,default:"80"},color:{type:String,default:"#F0B82B"},name:{type:String,default:""},edite:{type:Boolean,default:!1},id:{type:Number}},emits:["openFolder","editeFolder","addFile","deleteFolder","blurInput"],setup(F,{emit:r}){const a=r,e=F;return(w,t)=>(d(),C("div",M,[o(P,{"fab-mini":"",round:"",color:"primary",size:"5px",icon:"more_vert",class:"tw-z-[100] tw-mb-[-40px] tw-mr-[-60px]"},{default:s(()=>[o(j,null,{default:s(()=>[o(U,{dense:"",style:{"min-width":"100px"}},{default:s(()=>[p((d(),i(f,{clickable:"",onClick:t[0]||(t[0]=n=>a("openFolder",e.id))},{default:s(()=>[o(u,{color:"secondary",name:"folder_open",class:"tw-mt-[4px] tw-mr-[4px]",size:"20px"}),o(m,null,{default:s(()=>[c("Open folder")]),_:1})]),_:1})),[[_]]),p((d(),i(f,{clickable:"",onClick:t[1]||(t[1]=n=>a("editeFolder"))},{default:s(()=>[o(u,{color:"secondary",name:"edit",class:"tw-mt-[4px] tw-mr-[4px]",size:"20px"}),o(m,null,{default:s(()=>[c("Edite name")]),_:1})]),_:1})),[[_]]),p((d(),i(f,{clickable:""},{default:s(()=>[o(u,{color:"secondary",name:"palette",class:"tw-mt-[4px] tw-mr-[4px]",size:"20px"}),o(m,null,{default:s(()=>[c("Change color")]),_:1})]),_:1})),[[_]]),p((d(),i(f,{clickable:"",onClick:t[2]||(t[2]=n=>a("addFile"))},{default:s(()=>[o(u,{color:"secondary",name:"note_add",class:"tw-mt-[4px] tw-mr-[4px]",size:"20px"}),o(m,null,{default:s(()=>[c("add file")]),_:1})]),_:1})),[[_]]),p((d(),i(f,{clickable:"",onClick:t[3]||(t[3]=n=>a("deleteFolder",e.id))},{default:s(()=>[o(u,{color:"secondary",name:"delete",class:"tw-mt-[4px] tw-mr-[4px]",size:"20px"}),o(m,null,{default:s(()=>[c("Delete folder")]),_:1})]),_:1})),[[_]])]),_:1})]),_:1})]),_:1}),o(u,{name:"folder",size:`${e.size}px`,style:b(`color:${e.color}`),class:"tw-cursor-pointer tw-w-full",onDblclick:t[4]||(t[4]=n=>a("openFolder",e.id))},null,8,["size","style"]),y("input",{id:`folder-${e.id}`,disabled:!e.edite,value:e.name,style:b(e.edite?"":"cursor:pointer !important; background-color:transparent"),class:"tw-cursor-pointer text-center",onBlur:t[5]||(t[5]=n=>a("blurInput",n)),onKeyup:t[6]||(t[6]=Q(n=>a("blurInput",n),["enter"])),onDblclick:t[7]||(t[7]=n=>a("openFolder",e.id))},null,44,G)]))}},W=g(R,[["__file","FolderContent.vue"]]),X={class:"text-center"},Z={__name:"FileExplorer",setup(F){const{store:r,router:a}=K(),e=k(0),w=k(!1),t={edite:!0,type:"folder",color:"#F0B82B",size:"80",name:"",user_id:"",folder_id:""},n=()=>{r.folders.data?e.value=r.folders.data.length+100:e.value=100,r.folders.addPlaceFolder({...t,id:e.value}),setTimeout(()=>{document.getElementById(`folder-${e.value}`)?.focus()},60)},$=l=>{setTimeout(()=>{l.target.value==""&&l.target._value!=""?l.target.value=l.target._value:l.target._value==""&&l.target.value==""?r.folders.removePlaceFolder(e.value):w.value?r.folders.editeFolder(e.value):(l.target._value=l.target.value,r.folders.createFolder({...t,edite:!1,name:l.target._value,user_id:r.auth.current.id}))},60)},z=l=>{r.folders.deleteFolder(l)},I=l=>{w.value=!0,e.value=l,r.folders.changeEditePlaceFolder(l),document.getElementById(`folder-${e.value}`)?.focus()},B=l=>{r.files.reset(),a.push({name:"folders",params:{id:l}})};return D(()=>{r.folders.getFoldersOfUser(r.auth.current.id)}),(l,x)=>(d(),i(L,null,{default:s(()=>[y("div",X,[o(u,{name:"create_new_folder",size:"80px",color:"primary",class:"tw-opacity-50 tw-cursor-pointer",onClick:x[0]||(x[0]=v=>n())}),y("p",{class:"text-accent tw-cursor-pointer",onClick:x[1]||(x[1]=v=>n())}," New folder ")]),(d(!0),C(N,null,S(T(r).folders.data,v=>(d(),i(W,V({key:v.id,ref_for:!0},v,{onBlurInput:$,onDeleteFolder:z,onEditeFolder:I,onOpenFolder:B}),null,16))),128))]),_:1}))}},q=g(Z,[["__file","FileExplorer.vue"]]),A=O({name:"IndexPage",__name:"IndexPage",setup(F){return(r,a)=>(d(),i(E,{class:"row items-center justify-evenly"},{default:s(()=>[o(q)]),_:1}))}}),oe=g(A,[["__file","IndexPage.vue"]]);export{oe as default};
