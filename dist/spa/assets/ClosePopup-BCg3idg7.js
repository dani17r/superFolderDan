import{X as S,o as A,ay as L,g as T,n as y,w as C,az as j,f as G,a as D,aA as P,c as I,r as V,aj as N,au as O,h as q,aB as B,aC as R,aD as W,a3 as K,a6 as Q,aE as z,a5 as X}from"./index-evhwiPK5.js";import{r as M,c as x}from"./superComposable-BBPPTMVA.js";function le(){let e=null;const t=T();function n(){e!==null&&(clearTimeout(e),e=null)}return S(n),A(n),{removeTimeout:n,registerTimeout(i,a){n(),L(t)===!1&&(e=setTimeout(()=>{e=null,i()},a))}}}function ue(){let e;const t=T();function n(){e=void 0}return S(n),A(n),{removeTick:n,registerTick(i){e=i,y(()=>{e===i&&(L(t)===!1&&e(),e=void 0)})}}}const re={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},fe=["beforeShow","show","beforeHide","hide"];function de({showing:e,canShow:t,hideOnRouteChange:n,handleShow:i,handleHide:a,processOnMount:c}){const r=T(),{props:s,emit:l,proxy:g}=r;let u;function v(o){e.value===!0?w(o):h(o)}function h(o){if(s.disable===!0||o!==void 0&&o.qAnchorHandled===!0||t!==void 0&&t(o)!==!0)return;const p=s["onUpdate:modelValue"]!==void 0;p===!0&&(l("update:modelValue",!0),u=o,y(()=>{u===o&&(u=void 0)})),(s.modelValue===null||p===!1)&&E(o)}function E(o){e.value!==!0&&(e.value=!0,l("beforeShow",o),i!==void 0?i(o):l("show",o))}function w(o){if(s.disable===!0)return;const p=s["onUpdate:modelValue"]!==void 0;p===!0&&(l("update:modelValue",!1),u=o,y(()=>{u===o&&(u=void 0)})),(s.modelValue===null||p===!1)&&k(o)}function k(o){e.value!==!1&&(e.value=!1,l("beforeHide",o),a!==void 0?a(o):l("hide",o))}function _(o){s.disable===!0&&o===!0?s["onUpdate:modelValue"]!==void 0&&l("update:modelValue",!1):o===!0!==e.value&&(o===!0?E:k)(u)}C(()=>s.modelValue,_),n!==void 0&&j(r)===!0&&C(()=>g.$route.fullPath,()=>{n.value===!0&&e.value===!0&&w()}),c===!0&&G(()=>{_(s.modelValue)});const $={show:h,hide:w,toggle:v};return Object.assign(g,$),$}const ce={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function pe(e,t=()=>{},n=()=>{}){return{transitionProps:D(()=>{const i=`q-transition--${e.transitionShow||t()}`,a=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${i}-enter-from`,enterActiveClass:`${i}-enter-active`,enterToClass:`${i}-enter-to`,leaveFromClass:`${a}-leave-from`,leaveActiveClass:`${a}-leave-active`,leaveToClass:`${a}-leave-to`}}),transitionStyle:D(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const b=[];function J(e){return b.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function Y(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return P(e)}else if(e.__qPortal===!0){const n=P(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=P(e)}while(e!=null)}function Z(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(n--,e.$options.name==="QMenu"){e=Y(e,t);continue}e.hide(t)}e=P(e)}}const ee=I({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function te(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function me(e,t,n,i){const a=V(!1),c=V(!1);let r=null;const s={},l=i==="dialog"&&te(e);function g(v){if(v===!0){M(s),c.value=!0;return}c.value=!1,a.value===!1&&(l===!1&&r===null&&(r=R(!1,i)),a.value=!0,b.push(e.proxy),x(s))}function u(v){if(c.value=!1,v!==!0)return;M(s),a.value=!1;const h=b.indexOf(e.proxy);h!==-1&&b.splice(h,1),r!==null&&(W(r),r=null)}return N(()=>{u(!0)}),e.proxy.__qPortal=!0,O(e.proxy,"contentEl",()=>t.value),{showPortal:g,hidePortal:u,portalIsActive:a,portalIsAccessible:c,renderPortal:()=>l===!0?n():a.value===!0?[q(B,{to:r},q(ee,n))]:void 0}}const f=[];let m;function ne(e){m=e.keyCode===27}function oe(){m===!0&&(m=!1)}function ie(e){m===!0&&(m=!1,K(e,27)===!0&&f[f.length-1](e))}function U(e){window[e]("keydown",ne),window[e]("blur",oe),window[e]("keyup",ie),m=!1}function ve(e){Q.is.desktop===!0&&(f.push(e),f.length===1&&U("addEventListener"))}function he(e){const t=f.indexOf(e);t!==-1&&(f.splice(t,1),f.length===0&&U("removeEventListener"))}const d=[];function H(e){d[d.length-1](e)}function ge(e){Q.is.desktop===!0&&(d.push(e),d.length===1&&document.body.addEventListener("focusin",H))}function Pe(e){const t=d.indexOf(e);t!==-1&&(d.splice(t,1),d.length===0&&document.body.removeEventListener("focusin",H))}function be(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),z.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function F(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}const we=X({name:"close-popup",beforeMount(e,{value:t}){const n={depth:F(t),handler(i){n.depth!==0&&setTimeout(()=>{const a=J(e);a!==void 0&&Z(a,i,n.depth)})},handlerKey(i){K(i,13)===!0&&n.handler(i)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=F(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});export{we as C,fe as a,le as b,de as c,be as d,ce as e,ue as f,pe as g,me as h,he as i,ge as j,ve as k,Y as l,b as p,Pe as r,re as u};
